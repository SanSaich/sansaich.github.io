(function(e){function t(t){for(var o,i,a=t[0],c=t[1],u=t[2],d=0,m=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},s=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},4391:function(e,t,n){},5209:function(e,t,n){"use strict";n("dd0b")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"section-left"},[n("Form"),n("List")],1),n("section",{staticClass:"section-right"},[n("TodoList")],1)])},s=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["Logged!"!==e.authMessage?n("form",{on:{submit:function(e){e.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{placeholder:"Логин",type:"text"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{placeholder:"email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{placeholder:"Пароль",type:"text"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.sendRequest(e.body={name:e.login,email:e.email,password:e.password})}}},[e._v(" Регистрация ")]),n("p",[e._v(e._s(e.message))]),n("button",{attrs:{type:"button"},on:{click:function(t){return e.sendLog(e.body={email:e.email,password:e.password})}}},[e._v(" Авторизация ")])]):e._e(),n("p",{staticClass:"title"},[e._v(e._s(e.authMessage))])])},a=[],c=n("5530"),u=n("2f62"),l={mounted:function(){localStorage.getItem("access_token")&&(this.$store.dispatch("getLists"),this.$store.commit("resToken"))},name:"Form",data:function(){return{login:"",password:"",email:""}},computed:Object(u["c"])({message:function(e){return e.message},authMessage:function(e){return e.token?"Logged!":e.messageLogin}}),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["sendReg","sendLogin"])),{},{sendRequest:function(e){return this.sendReg(e)},sendLog:function(e){return this.sendLogin(e)}})},d=l,m=(n("5209"),n("2877")),f=Object(m["a"])(d,i,a,!1,null,"ee7c1b02",null),p=f.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.resToken?n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[n("p",[e._v(e._s(e.nameList))])]),n("div",{staticClass:"list"},e._l(e.getList,(function(t){return n("ul",{key:t.id},[n("div",{staticClass:"item"},[n("input",{attrs:{type:"checkbox",name:"",id:""}}),n("li",[e._v(e._s(t.name))])])])})),0),e.getList?n("div",{staticClass:"add-todo"},[n("div",{staticClass:"creat-item"},[n("form",{on:{submit:function(e){e.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],attrs:{placeholder:"Введите Дело",type:"text"},domProps:{value:e.itemName},on:{input:function(t){t.target.composing||(e.itemName=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.check,expression:"check"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.check)?e._i(e.check,null)>-1:e.check},on:{change:function(t){var n=e.check,o=t.target,r=!!o.checked;if(Array.isArray(n)){var s=null,i=e._i(n,s);o.checked?i<0&&(e.check=n.concat([s])):i>-1&&(e.check=n.slice(0,i).concat(n.slice(i+1)))}else e.check=r}}}),n("span",[e._v("Срочное")]),n("button",{attrs:{type:"button"},on:{click:function(t){return e.addItem([e.itemName,e.check])}}},[e._v("Добавить")])])])]):e._e()]):e._e()},h=[],v={name:"TodoList",data:function(){return{itemName:"",check:""}},computed:Object(u["c"])({getList:function(e){return e.list},nameList:function(e){return e.nameList},resToken:function(e){return e.token}}),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["setItem"])),{},{addItem:function(e){return this.itemName="",this.setItem(e)}})},b=v,L=(n("fdae"),Object(m["a"])(b,g,h,!1,null,"7a7a5f47",null)),k=L.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.getLists,(function(t){return n("ul",{key:t.id},[n("li",[n("p",{on:{click:function(n){return e.getList([t.id,t.name])}}},[e._v(e._s(t.name))]),n("div",{staticClass:"del",on:{click:function(n){return e.delList(t.id)}}})])])})),e.resToken?n("div",{staticClass:"creat-list"},[n("form",{on:{submit:function(e){e.preventDefault()}}},[n("hr"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.listName,expression:"listName"}],attrs:{placeholder:"Введите название списка",type:"text"},domProps:{value:e.listName},on:{input:function(t){t.target.composing||(e.listName=t.target.value)}}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.AddList(e.listName)}}},[e._v("Добавить "+e._s(this.listName))])])]):e._e()],2)},j=[],w={name:"List",data:function(){return{listName:""}},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["getListId","setList","delListId"])),{},{getList:function(e){return this.getListId(e)},AddList:function(e){return this.listName="",this.setList(e)},delList:function(e){return this.delListId(e)}}),computed:Object(u["c"])({getLists:function(e){return e.lists},resToken:function(e){return e.token}})},_=w,O=(n("bc94"),Object(m["a"])(_,y,j,!1,null,"5e2abc97",null)),x=O.exports,I={name:"App",data:function(){return{}},components:{TodoList:k,List:x,Form:p},methods:{},computed:{}},T=I,N=(n("034f"),Object(m["a"])(T,r,s,!1,null,null,null)),R=N.exports,S=n("3835"),C=n("1da1");n("96cf"),n("d3b7");o["a"].use(u["a"]);var P=new u["a"].Store({state:{nameList:"",idList:"",token:!1,lists:"",list:"",userId:"",message:"",messageLogin:"",url:"https://sergey-melnikov-api.academy.smartworld.team/"},mutations:{saveIdList:function(e,t){e.idList=t},saveNameList:function(e,t){e.nameList=t},saveList:function(e,t){e.list=t},saveLists:function(e,t){e.lists=t},saveUserId:function(e,t){e.userId=t},resReg:function(e,t){e.message=t},resLogin:function(e,t){e.messageLogin=t},resToken:function(e){e.token=!0}},actions:{sendReg:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.state.url+"user/register",r={"Content-Type":"application/json"},n.next=4,fetch(o,{method:"POST",body:JSON.stringify(t),headers:r}).then((function(t){t.ok?t.json().then((function(t){console.log(t),e.commit("resReg",t.message)})):t.json().then((function(t){console.log("ошибка:",t),e.commit("resReg",t.email[0])}))}));case 4:case"end":return n.stop()}}),n)})))()},sendLogin:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.state.url+"user/login",r={"Content-Type":"application/json"},n.next=4,fetch(o,{method:"POST",body:JSON.stringify(t),headers:r}).then((function(t){t.ok?t.json().then((function(t){console.log(t.message),localStorage.setItem("access_token",t.data.access_token),e.commit("resToken")})).then((function(){return e.dispatch("getLists")})).then((function(){return e.dispatch("getUserId")})):t.json().then((function(t){console.log("ошибка:",t),e.commit("resLogin",t)}))}));case 4:case"end":return n.stop()}}),n)})))()},getLists:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state.url+"list",o=localStorage.getItem("access_token"),console.log(o),r={"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},t.next=6,fetch(n,{method:"GET",headers:r}).then((function(t){t.json().then((function(t){console.log(t),e.commit("saveLists",t.data.items)}))}));case 6:case"end":return t.stop()}}),t)})))()},getListId:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r,s,i,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=Object(S["a"])(t,2),r=o[0],s=o[1],i=e.state.url+"task?filter[0][0]=list_id&filter[0][1]==&filter[0][2]=".concat(r),a=localStorage.getItem("access_token"),c={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},n.next=6,fetch(i,{method:"GET",headers:c}).then((function(t){t.json().then((function(t){console.log(t),e.commit("saveList",t.data.items),console.log(s),e.commit("saveNameList",s),e.commit("saveIdList",r)}))}));case 6:case"end":return n.stop()}}),n)})))()},setList:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.state.url+"list",r=localStorage.getItem("access_token"),s={"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},i={attributes:{name:t}},n.next=6,fetch(o,{method:"POST",headers:s,body:JSON.stringify(i)}).then((function(e){e.json().then((function(e){console.log(e),console.log(t)}))})).then((function(){return e.dispatch("getLists")}));case 6:case"end":return n.stop()}}),n)})))()},delListId:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.state.url+"list/delete/".concat(t),r=localStorage.getItem("access_token"),console.log(t),s={"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},n.next=6,fetch(o,{method:"DELETE",headers:s}).then((function(e){e.json().then((function(e){console.log(e)}))})).then((function(){return e.dispatch("getLists")}));case 6:case"end":return n.stop()}}),n)})))()},getUserId:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.state.url+"user?filter[1][0]=email&filter[1][1]=like&filter[1][2]=".concat(t),r=localStorage.getItem("access_token"),s={"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},n.next=5,fetch(o,{method:"GET",headers:s}).then((function(t){t.json().then((function(t){console.log(t),e.commit("saveUserId",t.data.items.id)}))}));case 5:case"end":return n.stop()}}),n)})))()},setItem:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var o,r,s,i,a,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=Object(S["a"])(t,2),r=o[0],s=o[1],i=e.state.url+"task/create",a=localStorage.getItem("access_token"),c={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},u={attributes:{name:r,is_completed:!1,list_id:e.state.idList,executor_user_id:e.state.userId,urgency:s+1}},n.next=7,fetch(i,{method:"POST",headers:c,body:JSON.stringify(u)}).then((function(e){e.json().then((function(e){console.log(e),console.log(r)}))})).then((function(){return e.dispatch("getListId",[e.state.idList,e.state.nameList])}));case 7:case"end":return n.stop()}}),n)})))()}},modules:{}});o["a"].config.productionTip=!1,new o["a"]({store:P,render:function(e){return e(R)}}).$mount("#app")},"85ec":function(e,t,n){},9072:function(e,t,n){},bc94:function(e,t,n){"use strict";n("9072")},dd0b:function(e,t,n){},fdae:function(e,t,n){"use strict";n("4391")}});
//# sourceMappingURL=app.1431cc89.js.map